(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{fAJX:function(t,e,r){"use strict";r.r(e),r.d(e,"routes",(function(){return p})),r.d(e,"OrdersModule",(function(){return h}));var o=r("ofXK"),c=r("fXoL");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Cb({type:t,selectors:[["app-order-list"]],decls:5,vars:0,consts:[[1,"container","h-100"],[1,"row","h-100","justify-content-center","align-items-center"],[1,"col-12","text-center"]],template:function(t,e){1&t&&(c.Lb(0,"div",0),c.Lb(1,"div",1),c.Lb(2,"div",2),c.Lb(3,"h6"),c.kc(4,"Pedidos en desarrollo...."),c.Kb(),c.Kb(),c.Kb(),c.Kb())},styles:[""]}),t})();var s=r("tyNb"),n=r("IKdg");function b(t,e){if(1&t&&(c.Lb(0,"div",1),c.Lb(1,"div",5),c.kc(2),c.Kb(),c.Lb(3,"div",13),c.kc(4),c.Kb(),c.Lb(5,"div",14),c.kc(6),c.Vb(7,"currency"),c.Kb(),c.Kb()),2&t){const t=e.$implicit;c.xb(2),c.mc(" -",t.name," "),c.xb(2),c.mc(" ",t.qty_select," "),c.xb(2),c.mc(" ",c.Wb(7,3,t.user_price)," ")}}function d(t,e){if(1&t&&(c.Lb(0,"div",11),c.jc(1,b,8,5,"div",16),c.Kb()),2&t){const t=e.$implicit;c.xb(1),c.Zb("ngForOf",t.productsSelected)}}function l(t,e){if(1&t&&(c.Lb(0,"div",11),c.Lb(1,"div",1),c.Lb(2,"div",12),c.kc(3," Producto "),c.Kb(),c.Lb(4,"div",13),c.kc(5," Cantidad "),c.Kb(),c.Lb(6,"div",14),c.kc(7," Precio "),c.Kb(),c.Kb(),c.jc(8,d,2,1,"div",15),c.Kb()),2&t){const t=c.Ub();c.xb(8),c.Zb("ngForOf",t.order)}}function a(t,e){if(1&t){const t=c.Mb();c.Lb(0,"div",1),c.Lb(1,"div",5),c.kc(2),c.Kb(),c.Lb(3,"div",9),c.kc(4),c.Kb(),c.Lb(5,"div",10),c.Lb(6,"div",12),c.Lb(7,"a",7),c.Lb(8,"img",13),c.Sb("click",(function(){c.fc(t);const r=e.$implicit;return c.Ub(2).selectPromo(r.id)})),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.Kb()}if(2&t){const t=e.$implicit;c.xb(2),c.mc(" -",t.product_id[1]," "),c.xb(2),c.mc(" ",t.product_qty," ")}}function v(t,e){if(1&t&&(c.Lb(0,"div",7),c.Lb(1,"div",1),c.Lb(2,"div",8),c.kc(3," Producto "),c.Kb(),c.Lb(4,"div",9),c.kc(5," Cantidad "),c.Kb(),c.Jb(6,"div",10),c.Kb(),c.Lb(7,"div",7),c.jc(8,a,9,2,"div",11),c.Kb(),c.Kb()),2&t){const t=c.Ub();c.xb(8),c.Zb("ngForOf",t.promos)}}function u(t,e){if(1&t){const t=c.Mb();c.Lb(0,"div",1),c.Lb(1,"div",5),c.kc(2),c.Kb(),c.Lb(3,"div",9),c.kc(4),c.Kb(),c.Lb(5,"div",10),c.Lb(6,"div",12),c.Lb(7,"a",13),c.Sb("click",(function(){c.fc(t);const r=e.$implicit;return c.Ub(2).selectCarrier(r)})),c.kc(8,"elegir "),c.Kb(),c.Kb(),c.Kb(),c.Kb()}if(2&t){const t=e.$implicit;c.xb(2),c.mc(" -",t.display_name," "),c.xb(2),c.mc(" ",t.amount," ")}}function m(t,e){if(1&t&&(c.Lb(0,"div",7),c.Lb(1,"div",1),c.Lb(2,"div",8),c.kc(3," Envio "),c.Kb(),c.Lb(4,"div",9),c.kc(5," Precio "),c.Kb(),c.Jb(6,"div",10),c.Kb(),c.Lb(7,"div",7),c.jc(8,u,9,2,"div",11),c.Kb(),c.Kb()),2&t){const t=c.Ub();c.xb(8),c.Zb("ngForOf",t.carriers)}}const p=[{path:"",component:i},{path:"summary",component:(()=>{class t{constructor(t,e){this.saleOrderService=t,this.router=e,this.order=null,this.total=0,this.lines=[],this.order=JSON.parse(localStorage.getItem("tmpOrder")),this.order.forEach(t=>{t.productsSelected.forEach(t=>{this.lines.push({id:t.id,qty:t.qty_select}),this.total+=t.qty_select*t.user_price})})}ngOnInit(){}saveOrder(){this.saleOrderService.createSaleOrder(this.lines).then(t=>{if(console.log(t),t){let e=t[0].id;this.router.navigate(t[0].show_promos?["/orders/promos/"+e]:["/orders/delivery/"+e]),localStorage.removeItem("tmpOrder")}}).catch(t=>{console.log("errors"+t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(n.a),c.Ib(s.c))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-order-sumary"]],decls:19,vars:4,consts:[[1,"container","mt-2"],[1,"row"],["cass","col-12"],[1,"mb-0"],["class","",4,"ngIf"],[1,"col-6"],[1,"col-6","text-right"],[1,"row","order-actions","mx-auto","w-100"],[1,"col-6","text-left"],["routerLink","",1,"btn","btn-wkn","btn-sm","text-uppercase","pull-left"],[1,"btn","btn-wkn","btn-sm","text-uppercase","pull-right",3,"click"],[1,""],[1,"col-6","text-center"],[1,"col-2","text-center"],[1,"col-4","text-center"],["class","",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Lb(0,"div",0),c.Lb(1,"div",1),c.Lb(2,"div",2),c.Lb(3,"h6",3),c.Lb(4,"u"),c.kc(5,"Resumen del pedido"),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.jc(6,l,9,1,"div",4),c.Kb(),c.Lb(7,"div",1),c.Jb(8,"div",5),c.Lb(9,"div",6),c.kc(10),c.Vb(11,"currency"),c.Kb(),c.Kb(),c.Lb(12,"div",7),c.Lb(13,"div",8),c.Lb(14,"a",9),c.kc(15," volver"),c.Kb(),c.Kb(),c.Lb(16,"div",6),c.Lb(17,"a",10),c.Sb("click",(function(){return e.saveOrder()})),c.kc(18," finalizar"),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.xb(6),c.Zb("ngIf",e.order),c.xb(4),c.mc(" Total : ",c.Wb(11,2,e.total)," "))},directives:[o.k,s.d,o.j],pipes:[o.c],styles:[".order-actions[_ngcontent-%COMP%]{position:fixed;bottom:65px}"]}),t})()},{path:"promos/:id",component:(()=>{class t{constructor(t,e,r){this.actRoute=t,this.saleOrderService=e,this.router=r,this.promos=[]}ngOnInit(){this.orderId=Number(this.actRoute.snapshot.paramMap.get("id")),this.loadPromos(this.orderId)}loadPromos(t){this.saleOrderService.getPromos(t).then(t=>{0==t.length&&this.router.navigate(["/orders/delivery/"+this.orderId]),this.promos=t}).catch(t=>{console.log("errors"+t)})}selectPromo(t){this.saleOrderService.selectPromo(t).then(t=>{0==t.length&&this.router.navigate(["/orders/delivery/"+this.orderId]),this.promos=t,console.log(this.promos)}).catch(t=>{console.log("errors"+t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(s.a),c.Ib(n.a),c.Ib(s.c))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-order-promos"]],decls:10,vars:1,consts:[[1,"container","mt-2"],[1,"row"],["cass","col-12"],[1,"mb-0"],["class","",4,"ngIf"],[1,"col-6"],[1,"row","order-actions","mx-auto","w-100"],[1,""],[1,"col-6","text-center"],[1,"col-2","text-center"],[1,"col-4","text-center"],["class","row",4,"ngFor","ngForOf"],[1,"col-1","m-0","p-0","text-center","my-auto"],["src","assets/img/plus.png",1,"img-fluid",3,"click"]],template:function(t,e){1&t&&(c.Lb(0,"div",0),c.Lb(1,"div",1),c.Lb(2,"div",2),c.Lb(3,"h6",3),c.Lb(4,"u"),c.kc(5,"Promociones"),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.jc(6,v,9,1,"div",4),c.Kb(),c.Lb(7,"div",1),c.Jb(8,"div",5),c.Kb(),c.Jb(9,"div",6)),2&t&&(c.xb(6),c.Zb("ngIf",e.promos))},directives:[o.k,o.j],styles:[""]}),t})()},{path:"delivery/:id",component:(()=>{class t{constructor(t,e,r){this.actRoute=t,this.saleOrderService=e,this.router=r,this.carriers=[]}ngOnInit(){this.orderId=Number(this.actRoute.snapshot.paramMap.get("id")),this.getCarriers(this.orderId)}getCarriers(t){this.saleOrderService.getCarriers(t).then(t=>{console.log(t),this.carriers=t}).catch(t=>{console.log("errors"+t)})}selectCarrier(t){this.saleOrderService.deliveryConfirm(this.orderId,t.id,t.amount).then(t=>{this.router.navigate(["/orders/"])}).catch(t=>{console.log("errors"+t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(s.a),c.Ib(n.a),c.Ib(s.c))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-order-delivery"]],decls:10,vars:1,consts:[[1,"container","mt-2"],[1,"row"],["cass","col-12"],[1,"mb-0"],["class","",4,"ngIf"],[1,"col-6"],[1,"row","order-actions","mx-auto","w-100"],[1,""],[1,"col-6","text-center"],[1,"col-2","text-center"],[1,"col-4","text-center"],["class","row",4,"ngFor","ngForOf"],[1,"col-1","m-0","p-0","text-center","my-auto"],[1,"",3,"click"]],template:function(t,e){1&t&&(c.Lb(0,"div",0),c.Lb(1,"div",1),c.Lb(2,"div",2),c.Lb(3,"h6",3),c.Lb(4,"u"),c.kc(5,"Envio"),c.Kb(),c.Kb(),c.Kb(),c.Kb(),c.jc(6,m,9,1,"div",4),c.Kb(),c.Lb(7,"div",1),c.Jb(8,"div",5),c.Kb(),c.Jb(9,"div",6)),2&t&&(c.xb(6),c.Zb("ngIf",e.carriers))},directives:[o.k,o.j],styles:[""]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[o.b,s.e.forChild(p)]]}),t})()}}]);